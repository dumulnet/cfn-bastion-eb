
  var renderAll = false
  var nodes = new vis.DataSet([{"id":"root.LogRole","dependencies":[{"key":"Fn::GetAtt","value":["BastionSecureLogGroup"],"path":"$.Properties.Policies.PolicyDocument.Statement.Resource"}],"prefix":"root","hidden":false,"type":"AWS::IAM::Role","label":"LogRole","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_AWS-Identity-and-Access-Management_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23BD0816%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF5252%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_AWS-Identity-and-Access-Management_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FSecurity-Identity-Compliance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M14%2C59%20L66%2C59%20L66%2C21%20L14%2C21%20L14%2C59%20Z%20M68%2C20%20L68%2C60%20C68%2C60.552%2067.553%2C61%2067%2C61%20L13%2C61%20C12.447%2C61%2012%2C60.552%2012%2C60%20L12%2C20%20C12%2C19.448%2012.447%2C19%2013%2C19%20L67%2C19%20C67.553%2C19%2068%2C19.448%2068%2C20%20L68%2C20%20Z%20M44%2C48%20L59%2C48%20L59%2C46%20L44%2C46%20L44%2C48%20Z%20M57%2C42%20L62%2C42%20L62%2C40%20L57%2C40%20L57%2C42%20Z%20M44%2C42%20L52%2C42%20L52%2C40%20L44%2C40%20L44%2C42%20Z%20M29%2C46%20C29%2C45.449%2028.552%2C45%2028%2C45%20C27.448%2C45%2027%2C45.449%2027%2C46%20C27%2C46.551%2027.448%2C47%2028%2C47%20C28.552%2C47%2029%2C46.551%2029%2C46%20L29%2C46%20Z%20M31%2C46%20C31%2C47.302%2030.161%2C48.401%2029%2C48.816%20L29%2C51%20L27%2C51%20L27%2C48.815%20C25.839%2C48.401%2025%2C47.302%2025%2C46%20C25%2C44.346%2026.346%2C43%2028%2C43%20C29.654%2C43%2031%2C44.346%2031%2C46%20L31%2C46%20Z%20M19%2C53.993%20L36.994%2C54%20L36.996%2C50%20L33%2C50%20L33%2C48%20L36.996%2C48%20L36.998%2C45%20L33%2C45%20L33%2C43%20L36.999%2C43%20L37%2C40.007%20L19.006%2C40%20L19%2C53.993%20Z%20M22%2C38.001%20L34%2C38.006%20L34%2C31%20C34.001%2C28.697%2031.197%2C26.677%2028%2C26.675%20L27.996%2C26.675%20C24.804%2C26.675%2022.004%2C28.696%2022.002%2C31%20L22%2C38.001%20Z%20M17%2C54.992%20L17.006%2C39%20C17.006%2C38.734%2017.111%2C38.48%2017.299%2C38.292%20C17.486%2C38.105%2017.741%2C38%2018.006%2C38%20L20%2C38.001%20L20.002%2C31%20C20.004%2C27.512%2023.59%2C24.675%2027.996%2C24.675%20L28%2C24.675%20C32.412%2C24.677%2036.001%2C27.515%2036%2C31%20L36%2C38.007%20L38%2C38.008%20C38.553%2C38.008%2039%2C38.456%2039%2C39.008%20L38.994%2C55%20C38.994%2C55.266%2038.889%2C55.52%2038.701%2C55.708%20C38.514%2C55.895%2038.259%2C56%2037.994%2C56%20L18%2C55.992%20C17.447%2C55.992%2017%2C55.544%2017%2C54.992%20L17%2C54.992%20Z%20M60%2C36%20L62%2C36%20L62%2C34%20L60%2C34%20L60%2C36%20Z%20M44%2C36%20L55%2C36%20L55%2C34%20L44%2C34%20L44%2C36%20Z%22%20id%3D%22AWS-Identity-and-Access-Management_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::IAM::Role'\nProperties:\n  AssumeRolePolicyDocument:\n    Version: 2012-10-17\n    Statement:\n      - Effect: Allow\n        Principal:\n          Service: ec2.amazonaws.com\n        Action: 'sts:AssumeRole'\n  Path: /\n  Policies:\n    - PolicyName: CloudWatchLogs\n      PolicyDocument:\n        Version: 2012-10-17\n        Statement:\n          - Effect: Allow\n            Action:\n              - 'logs:DescribeLogStreams'\n              - 'logs:PutLogEvents'\n            Resource: !!GetAtt BastionSecureLogGroup.Arn\nDependsOn: BastionSecureLogGroup\n","resource":{"Type":"AWS::IAM::Role","Properties":{"AssumeRolePolicyDocument":{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"Service":"ec2.amazonaws.com"},"Action":"sts:AssumeRole"}]},"Path":"/","Policies":[{"PolicyName":"CloudWatchLogs","PolicyDocument":{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["logs:DescribeLogStreams","logs:PutLogEvents"],"Resource":{"Fn::GetAtt":["BastionSecureLogGroup","Arn"]}}]}}]},"DependsOn":"BastionSecureLogGroup"}},{"id":"root.BastionInstanceProfile","dependencies":[{"key":"Ref","value":["LogRole"],"path":"$.Properties.Roles"}],"prefix":"root","hidden":false,"type":"AWS::IAM::InstanceProfile","label":"BastionInstanceProfile","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_AWS-Identity-and-Access-Management_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23BD0816%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF5252%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_AWS-Identity-and-Access-Management_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FSecurity-Identity-Compliance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M14%2C59%20L66%2C59%20L66%2C21%20L14%2C21%20L14%2C59%20Z%20M68%2C20%20L68%2C60%20C68%2C60.552%2067.553%2C61%2067%2C61%20L13%2C61%20C12.447%2C61%2012%2C60.552%2012%2C60%20L12%2C20%20C12%2C19.448%2012.447%2C19%2013%2C19%20L67%2C19%20C67.553%2C19%2068%2C19.448%2068%2C20%20L68%2C20%20Z%20M44%2C48%20L59%2C48%20L59%2C46%20L44%2C46%20L44%2C48%20Z%20M57%2C42%20L62%2C42%20L62%2C40%20L57%2C40%20L57%2C42%20Z%20M44%2C42%20L52%2C42%20L52%2C40%20L44%2C40%20L44%2C42%20Z%20M29%2C46%20C29%2C45.449%2028.552%2C45%2028%2C45%20C27.448%2C45%2027%2C45.449%2027%2C46%20C27%2C46.551%2027.448%2C47%2028%2C47%20C28.552%2C47%2029%2C46.551%2029%2C46%20L29%2C46%20Z%20M31%2C46%20C31%2C47.302%2030.161%2C48.401%2029%2C48.816%20L29%2C51%20L27%2C51%20L27%2C48.815%20C25.839%2C48.401%2025%2C47.302%2025%2C46%20C25%2C44.346%2026.346%2C43%2028%2C43%20C29.654%2C43%2031%2C44.346%2031%2C46%20L31%2C46%20Z%20M19%2C53.993%20L36.994%2C54%20L36.996%2C50%20L33%2C50%20L33%2C48%20L36.996%2C48%20L36.998%2C45%20L33%2C45%20L33%2C43%20L36.999%2C43%20L37%2C40.007%20L19.006%2C40%20L19%2C53.993%20Z%20M22%2C38.001%20L34%2C38.006%20L34%2C31%20C34.001%2C28.697%2031.197%2C26.677%2028%2C26.675%20L27.996%2C26.675%20C24.804%2C26.675%2022.004%2C28.696%2022.002%2C31%20L22%2C38.001%20Z%20M17%2C54.992%20L17.006%2C39%20C17.006%2C38.734%2017.111%2C38.48%2017.299%2C38.292%20C17.486%2C38.105%2017.741%2C38%2018.006%2C38%20L20%2C38.001%20L20.002%2C31%20C20.004%2C27.512%2023.59%2C24.675%2027.996%2C24.675%20L28%2C24.675%20C32.412%2C24.677%2036.001%2C27.515%2036%2C31%20L36%2C38.007%20L38%2C38.008%20C38.553%2C38.008%2039%2C38.456%2039%2C39.008%20L38.994%2C55%20C38.994%2C55.266%2038.889%2C55.52%2038.701%2C55.708%20C38.514%2C55.895%2038.259%2C56%2037.994%2C56%20L18%2C55.992%20C17.447%2C55.992%2017%2C55.544%2017%2C54.992%20L17%2C54.992%20Z%20M60%2C36%20L62%2C36%20L62%2C34%20L60%2C34%20L60%2C36%20Z%20M44%2C36%20L55%2C36%20L55%2C34%20L44%2C34%20L44%2C36%20Z%22%20id%3D%22AWS-Identity-and-Access-Management_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::IAM::InstanceProfile'\nProperties:\n  Path: /\n  Roles:\n    - !!Ref LogRole\n","resource":{"Type":"AWS::IAM::InstanceProfile","Properties":{"Path":"/","Roles":[{"Ref":"LogRole"}]}}},{"id":"root.BastionHost","dependencies":[{"key":"Ref","value":[],"path":"$.Properties.KeyName"},{"key":"Ref","value":["BastionNetworkInterface"],"path":"$.Properties.NetworkInterfaces.NetworkInterfaceId"},{"key":"Ref","value":["BastionInstanceProfile"],"path":"$.Properties.IamInstanceProfile"},{"key":"Fn::Sub","value":["BastionSecureLogGroup"],"path":"$.Metadata.AWS::CloudFormation::Init.config.files./etc/awslogs/awslogs.conf.content"},{"key":"Fn::Sub","value":[],"path":"$.Metadata.AWS::CloudFormation::Init.config.files./etc/profile.d/init_google_authenticator.sh.content"},{"key":"Fn::Sub","value":[],"path":"$.Metadata.AWS::CloudFormation::Init.config.files./usr/local/sbin/configure_mfa.sh.content"}],"prefix":"root","hidden":false,"type":"AWS::EC2::Instance","label":"BastionHost","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-EC2_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23C8511B%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF9900%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-EC2_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FCompute%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M27%2C53%20L52%2C53%20L52%2C28%20L27%2C28%20L27%2C53%20Z%20M54%2C28%20L58%2C28%20L58%2C30%20L54%2C30%20L54%2C34%20L58%2C34%20L58%2C36%20L54%2C36%20L54%2C39%20L58%2C39%20L58%2C41%20L54%2C41%20L54%2C45%20L58%2C45%20L58%2C47%20L54%2C47%20L54%2C51%20L58%2C51%20L58%2C53%20L54%2C53%20L54%2C53.136%20C54%2C54.164%2053.164%2C55%2052.136%2C55%20L52%2C55%20L52%2C59%20L50%2C59%20L50%2C55%20L46%2C55%20L46%2C59%20L44%2C59%20L44%2C55%20L41%2C55%20L41%2C59%20L39%2C59%20L39%2C55%20L35%2C55%20L35%2C59%20L33%2C59%20L33%2C55%20L29%2C55%20L29%2C59%20L27%2C59%20L27%2C55%20L26.864%2C55%20C25.836%2C55%2025%2C54.164%2025%2C53.136%20L25%2C53%20L22%2C53%20L22%2C51%20L25%2C51%20L25%2C47%20L22%2C47%20L22%2C45%20L25%2C45%20L25%2C41%20L22%2C41%20L22%2C39%20L25%2C39%20L25%2C36%20L22%2C36%20L22%2C34%20L25%2C34%20L25%2C30%20L22%2C30%20L22%2C28%20L25%2C28%20L25%2C27.864%20C25%2C26.836%2025.836%2C26%2026.864%2C26%20L27%2C26%20L27%2C22%20L29%2C22%20L29%2C26%20L33%2C26%20L33%2C22%20L35%2C22%20L35%2C26%20L39%2C26%20L39%2C22%20L41%2C22%20L41%2C26%20L44%2C26%20L44%2C22%20L46%2C22%20L46%2C26%20L50%2C26%20L50%2C22%20L52%2C22%20L52%2C26%20L52.136%2C26%20C53.164%2C26%2054%2C26.836%2054%2C27.864%20L54%2C28%20Z%20M41%2C65.876%20C41%2C65.944%2040.944%2C66%2040.876%2C66%20L14.124%2C66%20C14.056%2C66%2014%2C65.944%2014%2C65.876%20L14%2C39.124%20C14%2C39.056%2014.056%2C39%2014.124%2C39%20L20%2C39%20L20%2C37%20L14.124%2C37%20C12.953%2C37%2012%2C37.953%2012%2C39.124%20L12%2C65.876%20C12%2C67.047%2012.953%2C68%2014.124%2C68%20L40.876%2C68%20C42.047%2C68%2043%2C67.047%2043%2C65.876%20L43%2C61%20L41%2C61%20L41%2C65.876%20Z%20M68%2C14.124%20L68%2C40.876%20C68%2C42.047%2067.047%2C43%2065.876%2C43%20L60%2C43%20L60%2C41%20L65.876%2C41%20C65.944%2C41%2066%2C40.944%2066%2C40.876%20L66%2C14.124%20C66%2C14.056%2065.944%2C14%2065.876%2C14%20L39.124%2C14%20C39.056%2C14%2039%2C14.056%2039%2C14.124%20L39%2C20%20L37%2C20%20L37%2C14.124%20C37%2C12.953%2037.953%2C12%2039.124%2C12%20L65.876%2C12%20C67.047%2C12%2068%2C12.953%2068%2C14.124%20L68%2C14.124%20Z%22%20id%3D%22Amazon-EC2_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::EC2::Instance'\nMetadata:\n  'AWS::CloudFormation::Init':\n    config:\n      packages:\n        yum:\n          awslogs: []\n          google-authenticator: []\n      files:\n        /etc/cfn/cfn-hup.conf:\n          mode: '000444'\n          owner: root\n          group: root\n          content: !!Sub |\n            [main]\n            stack=${AWS::StackId}\n            region=${AWS::Region}\n        /etc/cfn/hooks.d/cfn-auto-reloader.conf:\n          mode: '000444'\n          owner: root\n          group: root\n          content: !!Sub \n            [cfn-auto-reloader-hook]\n\n            triggers=post.update\n\n            path=Resources.BastionHost.Metadata.AWS::CloudFormation::Init\n\n            action=/opt/aws/bin/cfn-init -v --stack ${AWS::StackName} --resource\n            BastionHost --region ${AWS::Region}\n        /etc/awslogs/awslogs.conf:\n          mode: '000444'\n          owner: root\n          group: root\n          content: !!Sub |\n            [general]\n            use_gzip_http_content_encoding = true\n            state_file = /var/lib/awslogs/agent-state\n            [/var/log/secure]\n            file = /var/log/secure\n            log_group_name = ${BastionSecureLogGroup}\n            log_stream_name = log\n            datetime_format = %b %d %H:%M:%S\n        /etc/awslogs/awscli.conf:\n          mode: '000444'\n          owner: root\n          group: root\n          content: !!Sub |\n            [plugins]\n            cwlogs = cwlogs\n            [default]\n            region = ${AWS::Region}\n        /etc/profile.d/init_google_authenticator.sh:\n          owner: root\n          group: root\n          content: !!Sub \n            #!/bin/bash -xe\n\n            if [ \"${MFA}\" == \"true\" ] && [ ! -e ~/.google_authenticator ]  &&  [\n            $USER != \"root\" ]; then\n              echo -e \"Initializing google-authenticator\\n\"\n              google-authenticator --time-based --disallow-reuse --force --rate-limit=3 --rate-time=30 --window-size=3\n              echo -e \"Save the generated emergency scratch codes and use secret key or scan the QR code to register your device for multi-factor authentication.\\n\"\n              echo -e \"Login again using your ssh key pair and the generated one-time password on your registered device.\\n\"\n              logout\n            fi\n        /usr/local/sbin/configure_mfa.sh:\n          mode: '000550'\n          owner: root\n          group: root\n          content: !!Sub |\n            #!/bin/bash -xe\n            if [ \"${MFA}\" == \"true\" ]; then\n              echo \"auth       required     pam_google_authenticator.so nullok\"  /etc/pam.d/sshd\n              sed -e '/auth       substack     password-auth/ s/^#*/#/' -i /etc/pam.d/sshd\n              sed -e '/ChallengeResponseAuthentication no/ s/^#*/#/' -i /etc/ssh/sshd_config\n              sed -e '/#ChallengeResponseAuthentication yes/s/^#//' -i /etc/ssh/sshd_config\n              echo  /etc/ssh/sshd_config\n              echo \"AuthenticationMethods publickey,keyboard-interactive\"  /etc/ssh/sshd_config\n              service sshd restart\n            fi\n            rm -f /usr/local/sbin/configure_mfa.sh\n      commands:\n        configure-mfa:\n          command: /usr/local/sbin/configure_mfa.sh\n      services:\n        sysvinit:\n          cfn-hup:\n            enabled: true\n            ensureRunning: true\n            files:\n              - /etc/cfn/cfn-hup.conf\n              - /etc/cfn/hooks.d/cfn-auto-reloader.conf\n          awslogs:\n            enabled: true\n            ensureRunning: true\n            files: /etc/awslogs/awslogs.conf\nProperties:\n  InstanceType: t2.micro\n  KeyName: !!Ref KeyName\n  NetworkInterfaces:\n    - NetworkInterfaceId: !!Ref BastionNetworkInterface\n      DeviceIndex: 0\n  ImageId: !!FindInMap \n    - AMIMap\n    - !!Ref 'AWS::Region'\n    - AMI\n  UserData: !!Base64 \n    'Fn::Sub': \n      #!/bin/bash -xe\n\n      yum update -y\n\n      /opt/aws/bin/cfn-init -v -s ${AWS::StackId} --resource BastionHost\n      --region ${AWS::Region}\n\n      /opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackId} --resource\n      BastionHost --region ${AWS::Region}\n  IamInstanceProfile: !!Ref BastionInstanceProfile\n  Tags:\n    - Key: Name\n      Value: startup-kit-bastion\nDependsOn: BastionEipAssociation\nCreationPolicy:\n  ResourceSignal:\n    Count: 1\n    Timeout: PT5M\n","resource":{"Type":"AWS::EC2::Instance","Metadata":{"AWS::CloudFormation::Init":{"config":{"packages":{"yum":{"awslogs":[],"google-authenticator":[]}},"files":{"/etc/cfn/cfn-hup.conf":{"mode":"000444","owner":"root","group":"root","content":{"Fn::Sub":"[main]\nstack=${AWS::StackId}\nregion=${AWS::Region}\n"}},"/etc/cfn/hooks.d/cfn-auto-reloader.conf":{"mode":"000444","owner":"root","group":"root","content":{"Fn::Sub":"[cfn-auto-reloader-hook]\ntriggers=post.update\npath=Resources.BastionHost.Metadata.AWS::CloudFormation::Init\naction=/opt/aws/bin/cfn-init -v --stack ${AWS::StackName} --resource BastionHost --region ${AWS::Region}\n"}},"/etc/awslogs/awslogs.conf":{"mode":"000444","owner":"root","group":"root","content":{"Fn::Sub":"[general]\nuse_gzip_http_content_encoding = true\nstate_file = /var/lib/awslogs/agent-state\n[/var/log/secure]\nfile = /var/log/secure\nlog_group_name = ${BastionSecureLogGroup}\nlog_stream_name = log\ndatetime_format = %b %d %H:%M:%S\n"}},"/etc/awslogs/awscli.conf":{"mode":"000444","owner":"root","group":"root","content":{"Fn::Sub":"[plugins]\ncwlogs = cwlogs\n[default]\nregion = ${AWS::Region}\n"}},"/etc/profile.d/init_google_authenticator.sh":{"owner":"root","group":"root","content":{"Fn::Sub":"#!/bin/bash -xe\nif [ \"${MFA}\" == \"true\" ] && [ ! -e ~/.google_authenticator ]  &&  [ $USER != \"root\" ]; then\n  echo -e \"Initializing google-authenticator\\n\"\n  google-authenticator --time-based --disallow-reuse --force --rate-limit=3 --rate-time=30 --window-size=3\n  echo -e \"Save the generated emergency scratch codes and use secret key or scan the QR code to register your device for multi-factor authentication.\\n\"\n  echo -e \"Login again using your ssh key pair and the generated one-time password on your registered device.\\n\"\n  logout\nfi\n"}},"/usr/local/sbin/configure_mfa.sh":{"mode":"000550","owner":"root","group":"root","content":{"Fn::Sub":"#!/bin/bash -xe\nif [ \"${MFA}\" == \"true\" ]; then\n  echo \"auth       required     pam_google_authenticator.so nullok\" >> /etc/pam.d/sshd\n  sed -e '/auth       substack     password-auth/ s/^#*/#/' -i /etc/pam.d/sshd\n  sed -e '/ChallengeResponseAuthentication no/ s/^#*/#/' -i /etc/ssh/sshd_config\n  sed -e '/#ChallengeResponseAuthentication yes/s/^#//' -i /etc/ssh/sshd_config\n  echo >> /etc/ssh/sshd_config\n  echo \"AuthenticationMethods publickey,keyboard-interactive\" >> /etc/ssh/sshd_config\n  service sshd restart\nfi\nrm -f /usr/local/sbin/configure_mfa.sh\n"}}},"commands":{"configure-mfa":{"command":"/usr/local/sbin/configure_mfa.sh"}},"services":{"sysvinit":{"cfn-hup":{"enabled":true,"ensureRunning":true,"files":["/etc/cfn/cfn-hup.conf","/etc/cfn/hooks.d/cfn-auto-reloader.conf"]},"awslogs":{"enabled":true,"ensureRunning":true,"files":"/etc/awslogs/awslogs.conf"}}}}}},"Properties":{"InstanceType":"t2.micro","KeyName":{"Ref":"KeyName"},"NetworkInterfaces":[{"NetworkInterfaceId":{"Ref":"BastionNetworkInterface"},"DeviceIndex":0}],"ImageId":{"Fn::FindInMap":["AMIMap",{"Ref":"AWS::Region"},"AMI"]},"UserData":{"Fn::Base64":{"Fn::Sub":"#!/bin/bash -xe\nyum update -y\n/opt/aws/bin/cfn-init -v -s ${AWS::StackId} --resource BastionHost --region ${AWS::Region}\n/opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackId} --resource BastionHost --region ${AWS::Region}\n"}},"IamInstanceProfile":{"Ref":"BastionInstanceProfile"},"Tags":[{"Key":"Name","Value":"startup-kit-bastion"}]},"DependsOn":"BastionEipAssociation","CreationPolicy":{"ResourceSignal":{"Count":1,"Timeout":"PT5M"}}}},{"id":"root.BastionEip","dependencies":[],"prefix":"root","hidden":false,"type":"AWS::EC2::EIP","label":"BastionEip","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-EC2_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23C8511B%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF9900%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-EC2_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FCompute%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M27%2C53%20L52%2C53%20L52%2C28%20L27%2C28%20L27%2C53%20Z%20M54%2C28%20L58%2C28%20L58%2C30%20L54%2C30%20L54%2C34%20L58%2C34%20L58%2C36%20L54%2C36%20L54%2C39%20L58%2C39%20L58%2C41%20L54%2C41%20L54%2C45%20L58%2C45%20L58%2C47%20L54%2C47%20L54%2C51%20L58%2C51%20L58%2C53%20L54%2C53%20L54%2C53.136%20C54%2C54.164%2053.164%2C55%2052.136%2C55%20L52%2C55%20L52%2C59%20L50%2C59%20L50%2C55%20L46%2C55%20L46%2C59%20L44%2C59%20L44%2C55%20L41%2C55%20L41%2C59%20L39%2C59%20L39%2C55%20L35%2C55%20L35%2C59%20L33%2C59%20L33%2C55%20L29%2C55%20L29%2C59%20L27%2C59%20L27%2C55%20L26.864%2C55%20C25.836%2C55%2025%2C54.164%2025%2C53.136%20L25%2C53%20L22%2C53%20L22%2C51%20L25%2C51%20L25%2C47%20L22%2C47%20L22%2C45%20L25%2C45%20L25%2C41%20L22%2C41%20L22%2C39%20L25%2C39%20L25%2C36%20L22%2C36%20L22%2C34%20L25%2C34%20L25%2C30%20L22%2C30%20L22%2C28%20L25%2C28%20L25%2C27.864%20C25%2C26.836%2025.836%2C26%2026.864%2C26%20L27%2C26%20L27%2C22%20L29%2C22%20L29%2C26%20L33%2C26%20L33%2C22%20L35%2C22%20L35%2C26%20L39%2C26%20L39%2C22%20L41%2C22%20L41%2C26%20L44%2C26%20L44%2C22%20L46%2C22%20L46%2C26%20L50%2C26%20L50%2C22%20L52%2C22%20L52%2C26%20L52.136%2C26%20C53.164%2C26%2054%2C26.836%2054%2C27.864%20L54%2C28%20Z%20M41%2C65.876%20C41%2C65.944%2040.944%2C66%2040.876%2C66%20L14.124%2C66%20C14.056%2C66%2014%2C65.944%2014%2C65.876%20L14%2C39.124%20C14%2C39.056%2014.056%2C39%2014.124%2C39%20L20%2C39%20L20%2C37%20L14.124%2C37%20C12.953%2C37%2012%2C37.953%2012%2C39.124%20L12%2C65.876%20C12%2C67.047%2012.953%2C68%2014.124%2C68%20L40.876%2C68%20C42.047%2C68%2043%2C67.047%2043%2C65.876%20L43%2C61%20L41%2C61%20L41%2C65.876%20Z%20M68%2C14.124%20L68%2C40.876%20C68%2C42.047%2067.047%2C43%2065.876%2C43%20L60%2C43%20L60%2C41%20L65.876%2C41%20C65.944%2C41%2066%2C40.944%2066%2C40.876%20L66%2C14.124%20C66%2C14.056%2065.944%2C14%2065.876%2C14%20L39.124%2C14%20C39.056%2C14%2039%2C14.056%2039%2C14.124%20L39%2C20%20L37%2C20%20L37%2C14.124%20C37%2C12.953%2037.953%2C12%2039.124%2C12%20L65.876%2C12%20C67.047%2C12%2068%2C12.953%2068%2C14.124%20L68%2C14.124%20Z%22%20id%3D%22Amazon-EC2_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::EC2::EIP'\nProperties:\n  Domain: vpc\n","resource":{"Type":"AWS::EC2::EIP","Properties":{"Domain":"vpc"}}},{"id":"root.BastionEipAssociation","dependencies":[{"key":"Ref","value":["BastionNetworkInterface"],"path":"$.Properties.NetworkInterfaceId"},{"key":"Fn::GetAtt","value":["BastionEip"],"path":"$.Properties.AllocationId"}],"prefix":"root","hidden":false,"type":"AWS::EC2::EIPAssociation","label":"BastionEipAssociation","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-EC2_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23C8511B%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF9900%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-EC2_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FCompute%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M27%2C53%20L52%2C53%20L52%2C28%20L27%2C28%20L27%2C53%20Z%20M54%2C28%20L58%2C28%20L58%2C30%20L54%2C30%20L54%2C34%20L58%2C34%20L58%2C36%20L54%2C36%20L54%2C39%20L58%2C39%20L58%2C41%20L54%2C41%20L54%2C45%20L58%2C45%20L58%2C47%20L54%2C47%20L54%2C51%20L58%2C51%20L58%2C53%20L54%2C53%20L54%2C53.136%20C54%2C54.164%2053.164%2C55%2052.136%2C55%20L52%2C55%20L52%2C59%20L50%2C59%20L50%2C55%20L46%2C55%20L46%2C59%20L44%2C59%20L44%2C55%20L41%2C55%20L41%2C59%20L39%2C59%20L39%2C55%20L35%2C55%20L35%2C59%20L33%2C59%20L33%2C55%20L29%2C55%20L29%2C59%20L27%2C59%20L27%2C55%20L26.864%2C55%20C25.836%2C55%2025%2C54.164%2025%2C53.136%20L25%2C53%20L22%2C53%20L22%2C51%20L25%2C51%20L25%2C47%20L22%2C47%20L22%2C45%20L25%2C45%20L25%2C41%20L22%2C41%20L22%2C39%20L25%2C39%20L25%2C36%20L22%2C36%20L22%2C34%20L25%2C34%20L25%2C30%20L22%2C30%20L22%2C28%20L25%2C28%20L25%2C27.864%20C25%2C26.836%2025.836%2C26%2026.864%2C26%20L27%2C26%20L27%2C22%20L29%2C22%20L29%2C26%20L33%2C26%20L33%2C22%20L35%2C22%20L35%2C26%20L39%2C26%20L39%2C22%20L41%2C22%20L41%2C26%20L44%2C26%20L44%2C22%20L46%2C22%20L46%2C26%20L50%2C26%20L50%2C22%20L52%2C22%20L52%2C26%20L52.136%2C26%20C53.164%2C26%2054%2C26.836%2054%2C27.864%20L54%2C28%20Z%20M41%2C65.876%20C41%2C65.944%2040.944%2C66%2040.876%2C66%20L14.124%2C66%20C14.056%2C66%2014%2C65.944%2014%2C65.876%20L14%2C39.124%20C14%2C39.056%2014.056%2C39%2014.124%2C39%20L20%2C39%20L20%2C37%20L14.124%2C37%20C12.953%2C37%2012%2C37.953%2012%2C39.124%20L12%2C65.876%20C12%2C67.047%2012.953%2C68%2014.124%2C68%20L40.876%2C68%20C42.047%2C68%2043%2C67.047%2043%2C65.876%20L43%2C61%20L41%2C61%20L41%2C65.876%20Z%20M68%2C14.124%20L68%2C40.876%20C68%2C42.047%2067.047%2C43%2065.876%2C43%20L60%2C43%20L60%2C41%20L65.876%2C41%20C65.944%2C41%2066%2C40.944%2066%2C40.876%20L66%2C14.124%20C66%2C14.056%2065.944%2C14%2065.876%2C14%20L39.124%2C14%20C39.056%2C14%2039%2C14.056%2039%2C14.124%20L39%2C20%20L37%2C20%20L37%2C14.124%20C37%2C12.953%2037.953%2C12%2039.124%2C12%20L65.876%2C12%20C67.047%2C12%2068%2C12.953%2068%2C14.124%20L68%2C14.124%20Z%22%20id%3D%22Amazon-EC2_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::EC2::EIPAssociation'\nProperties:\n  AllocationId: !!GetAtt BastionEip.AllocationId\n  NetworkInterfaceId: !!Ref BastionNetworkInterface\nDependsOn:\n  - BastionEip\n  - BastionNetworkInterface\n","resource":{"Type":"AWS::EC2::EIPAssociation","Properties":{"AllocationId":{"Fn::GetAtt":["BastionEip","AllocationId"]},"NetworkInterfaceId":{"Ref":"BastionNetworkInterface"}},"DependsOn":["BastionEip","BastionNetworkInterface"]}},{"id":"root.BastionNetworkInterface","dependencies":[{"key":"Fn::Sub","value":[],"path":"$.Properties.SubnetId"},{"key":"Fn::Sub","value":[],"path":"$.Properties.GroupSet"}],"prefix":"root","hidden":false,"type":"AWS::EC2::NetworkInterface","label":"BastionNetworkInterface","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-EC2_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23C8511B%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF9900%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-EC2_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FCompute%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M27%2C53%20L52%2C53%20L52%2C28%20L27%2C28%20L27%2C53%20Z%20M54%2C28%20L58%2C28%20L58%2C30%20L54%2C30%20L54%2C34%20L58%2C34%20L58%2C36%20L54%2C36%20L54%2C39%20L58%2C39%20L58%2C41%20L54%2C41%20L54%2C45%20L58%2C45%20L58%2C47%20L54%2C47%20L54%2C51%20L58%2C51%20L58%2C53%20L54%2C53%20L54%2C53.136%20C54%2C54.164%2053.164%2C55%2052.136%2C55%20L52%2C55%20L52%2C59%20L50%2C59%20L50%2C55%20L46%2C55%20L46%2C59%20L44%2C59%20L44%2C55%20L41%2C55%20L41%2C59%20L39%2C59%20L39%2C55%20L35%2C55%20L35%2C59%20L33%2C59%20L33%2C55%20L29%2C55%20L29%2C59%20L27%2C59%20L27%2C55%20L26.864%2C55%20C25.836%2C55%2025%2C54.164%2025%2C53.136%20L25%2C53%20L22%2C53%20L22%2C51%20L25%2C51%20L25%2C47%20L22%2C47%20L22%2C45%20L25%2C45%20L25%2C41%20L22%2C41%20L22%2C39%20L25%2C39%20L25%2C36%20L22%2C36%20L22%2C34%20L25%2C34%20L25%2C30%20L22%2C30%20L22%2C28%20L25%2C28%20L25%2C27.864%20C25%2C26.836%2025.836%2C26%2026.864%2C26%20L27%2C26%20L27%2C22%20L29%2C22%20L29%2C26%20L33%2C26%20L33%2C22%20L35%2C22%20L35%2C26%20L39%2C26%20L39%2C22%20L41%2C22%20L41%2C26%20L44%2C26%20L44%2C22%20L46%2C22%20L46%2C26%20L50%2C26%20L50%2C22%20L52%2C22%20L52%2C26%20L52.136%2C26%20C53.164%2C26%2054%2C26.836%2054%2C27.864%20L54%2C28%20Z%20M41%2C65.876%20C41%2C65.944%2040.944%2C66%2040.876%2C66%20L14.124%2C66%20C14.056%2C66%2014%2C65.944%2014%2C65.876%20L14%2C39.124%20C14%2C39.056%2014.056%2C39%2014.124%2C39%20L20%2C39%20L20%2C37%20L14.124%2C37%20C12.953%2C37%2012%2C37.953%2012%2C39.124%20L12%2C65.876%20C12%2C67.047%2012.953%2C68%2014.124%2C68%20L40.876%2C68%20C42.047%2C68%2043%2C67.047%2043%2C65.876%20L43%2C61%20L41%2C61%20L41%2C65.876%20Z%20M68%2C14.124%20L68%2C40.876%20C68%2C42.047%2067.047%2C43%2065.876%2C43%20L60%2C43%20L60%2C41%20L65.876%2C41%20C65.944%2C41%2066%2C40.944%2066%2C40.876%20L66%2C14.124%20C66%2C14.056%2065.944%2C14%2065.876%2C14%20L39.124%2C14%20C39.056%2C14%2039%2C14.056%2039%2C14.124%20L39%2C20%20L37%2C20%20L37%2C14.124%20C37%2C12.953%2037.953%2C12%2039.124%2C12%20L65.876%2C12%20C67.047%2C12%2068%2C12.953%2068%2C14.124%20L68%2C14.124%20Z%22%20id%3D%22Amazon-EC2_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::EC2::NetworkInterface'\nProperties:\n  SubnetId: !!ImportValue \n    'Fn::Sub': '${NetworkStackName}-PublicSubnet1ID'\n  GroupSet:\n    - !!ImportValue \n      'Fn::Sub': '${NetworkStackName}-BastionGroupID'\n  SourceDestCheck: true\n  Tags:\n    - Key: Name\n      Value: startup-kit-bastion\n","resource":{"Type":"AWS::EC2::NetworkInterface","Properties":{"SubnetId":{"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-PublicSubnet1ID"}},"GroupSet":[{"Fn::ImportValue":{"Fn::Sub":"${NetworkStackName}-BastionGroupID"}}],"SourceDestCheck":true,"Tags":[{"Key":"Name","Value":"startup-kit-bastion"}]}}},{"id":"root.BastionSecureLogGroup","dependencies":[{"key":"Ref","value":[],"path":"$.Properties.RetentionInDays"}],"prefix":"root","hidden":false,"type":"AWS::Logs::LogGroup","label":"BastionSecureLogGroup","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::Logs::LogGroup'\nProperties:\n  RetentionInDays: !!Ref LogRetentionInDays\n","resource":{"Type":"AWS::Logs::LogGroup","Properties":{"RetentionInDays":{"Ref":"LogRetentionInDays"}}}},{"id":"root.BastionSecureLogGroupStream","dependencies":[{"key":"Ref","value":["BastionSecureLogGroup"],"path":"$.Properties.LogGroupName"}],"prefix":"root","hidden":false,"type":"AWS::Logs::LogStream","label":"BastionSecureLogGroupStream","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::Logs::LogStream'\nProperties:\n  LogGroupName: !!Ref BastionSecureLogGroup\n  LogStreamName: log\n","resource":{"Type":"AWS::Logs::LogStream","Properties":{"LogGroupName":{"Ref":"BastionSecureLogGroup"},"LogStreamName":"log"}}},{"id":"root.SshInvalidUserMetricFilter","dependencies":[{"key":"Ref","value":["BastionSecureLogGroup"],"path":"$.Properties.LogGroupName"}],"prefix":"root","hidden":false,"type":"AWS::Logs::MetricFilter","label":"SshInvalidUserMetricFilter","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::Logs::MetricFilter'\nProperties:\n  LogGroupName: !!Ref BastionSecureLogGroup\n  FilterPattern: '[Mon, day, timestamp, ip, id, status = Invalid, ...]'\n  MetricTransformations:\n    - MetricValue: 1\n      MetricNamespace: SSH\n      MetricName: sshInvalidUser\n","resource":{"Type":"AWS::Logs::MetricFilter","Properties":{"LogGroupName":{"Ref":"BastionSecureLogGroup"},"FilterPattern":"[Mon, day, timestamp, ip, id, status = Invalid, ...]","MetricTransformations":[{"MetricValue":1,"MetricNamespace":"SSH","MetricName":"sshInvalidUser"}]}}},{"id":"root.SshInvalidhUserAlarm","dependencies":[],"prefix":"root","hidden":false,"type":"AWS::CloudWatch::Alarm","label":"SshInvalidhUserAlarm","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::CloudWatch::Alarm'\nProperties:\n  AlarmDescription: -\n    SSH connections attempted with invalid username is greater than 3 over 1\n    minutes\n  MetricName: sshInvalidUser\n  Namespace: SSH\n  Statistic: Sum\n  Period: 60\n  EvaluationPeriods: 1\n  Threshold: 3\n  ComparisonOperator: GreaterThanThreshold\n  TreatMissingData: notBreaching\n","resource":{"Type":"AWS::CloudWatch::Alarm","Properties":{"AlarmDescription":"SSH connections attempted with invalid username is greater than 3 over 1 minutes","MetricName":"sshInvalidUser","Namespace":"SSH","Statistic":"Sum","Period":60,"EvaluationPeriods":1,"Threshold":3,"ComparisonOperator":"GreaterThanThreshold","TreatMissingData":"notBreaching"}}},{"id":"root.SshClosedConnectionMetricFilter","dependencies":[{"key":"Ref","value":["BastionSecureLogGroup"],"path":"$.Properties.LogGroupName"}],"prefix":"root","hidden":false,"type":"AWS::Logs::MetricFilter","label":"SshClosedConnectionMetricFilter","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::Logs::MetricFilter'\nProperties:\n  LogGroupName: !!Ref BastionSecureLogGroup\n  FilterPattern: '[Mon, day, timestamp, ip, id, msg1= Connection, msg2 = closed, ...]'\n  MetricTransformations:\n    - MetricValue: 1\n      MetricNamespace: SSH\n      MetricName: sshClosedConnection\n","resource":{"Type":"AWS::Logs::MetricFilter","Properties":{"LogGroupName":{"Ref":"BastionSecureLogGroup"},"FilterPattern":"[Mon, day, timestamp, ip, id, msg1= Connection, msg2 = closed, ...]","MetricTransformations":[{"MetricValue":1,"MetricNamespace":"SSH","MetricName":"sshClosedConnection"}]}}},{"id":"root.SshClosedConnectionAlarm","dependencies":[],"prefix":"root","hidden":false,"type":"AWS::CloudWatch::Alarm","label":"SshClosedConnectionAlarm","shape":"image","image":"data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20width%3D%2280px%22%20height%3D%2280px%22%20viewBox%3D%220%200%2080%2080%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3C!--%20Generator%3A%20Sketch%2064%20(93537)%20-%20https%3A%2F%2Fsketch.com%20--%3E%0A%20%20%20%20%3Ctitle%3EIcon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%3C%2Ftitle%3E%0A%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%0A%20%20%20%20%3Cdefs%3E%0A%20%20%20%20%20%20%20%20%3ClinearGradient%20x1%3D%220%25%22%20y1%3D%22100%25%22%20x2%3D%22100%25%22%20y2%3D%220%25%22%20id%3D%22linearGradient-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23B0084D%22%20offset%3D%220%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23FF4F8B%22%20offset%3D%22100%25%22%3E%3C%2Fstop%3E%0A%20%20%20%20%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%20%20%3C%2Fdefs%3E%0A%20%20%20%20%3Cg%20id%3D%22Icon-Architecture%2F64%2FArch_Amazon-CloudWatch_64%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Icon-Architecture-BG%2F64%2FManagement-Governance%22%20fill%3D%22url(%23linearGradient-1)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20id%3D%22Rectangle%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2280%22%20height%3D%2280%22%3E%3C%2Frect%3E%0A%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M55.0592315%2C46.7773707%20C55.0592315%2C42.8680281%2051.8575588%2C39.6876305%2047.9220646%2C39.6876305%20C43.9865705%2C39.6876305%2040.785903%2C42.8680281%2040.785903%2C46.7773707%20C40.785903%2C50.6867133%2043.9865705%2C53.8671108%2047.9220646%2C53.8671108%20C51.8575588%2C53.8671108%2055.0592315%2C50.6867133%2055.0592315%2C46.7773707%20M57.0697011%2C46.7773707%20C57.0697011%2C51.7881194%2052.9663327%2C55.8642207%2047.9220646%2C55.8642207%20C42.8788018%2C55.8642207%2038.7754334%2C51.7881194%2038.7754334%2C46.7773707%20C38.7754334%2C41.7666219%2042.8788018%2C37.6905206%2047.9220646%2C37.6905206%20C52.9663327%2C37.6905206%2057.0697011%2C41.7666219%2057.0697011%2C46.7773707%20M65.5096522%2C60.4735504%20L58.5011554%2C54.2026253%20C57.9352082%2C54.9944794%2057.2808004%2C55.7174332%2056.5540156%2C56.3634982%20L63.5524601%2C62.6334248%20C64.1495696%2C63.1686502%2065.0784065%2C63.1187225%2065.6182176%2C62.5255808%20C66.155013%2C61.9324392%2066.1067617%2C61.010773%2065.5096522%2C60.4735504%20M47.9220646%2C57.6616197%20C53.9645309%2C57.6616197%2058.8801289%2C52.7786859%2058.8801289%2C46.7773707%20C58.8801289%2C40.7750569%2053.9645309%2C35.8931217%2047.9220646%2C35.8931217%20C41.8806036%2C35.8931217%2036.9650056%2C40.7750569%2036.9650056%2C46.7773707%20C36.9650056%2C52.7786859%2041.8806036%2C57.6616197%2047.9220646%2C57.6616197%20M67.1119965%2C63.8626459%20C66.4264264%2C64.6165549%2065.47849%2C65%2064.5285431%2C65%20C63.7002296%2C65%2062.8699057%2C64.708422%2062.207456%2C64.1172774%20L54.9305615%2C57.5987107%20C52.9070239%2C58.8968321%2050.505518%2C59.6587296%2047.9220646%2C59.6587296%20C40.7718297%2C59.6587296%2034.9545361%2C53.8800921%2034.9545361%2C46.7773707%20C34.9545361%2C39.6746493%2040.7718297%2C33.8960118%2047.9220646%2C33.8960118%20C55.0733048%2C33.8960118%2060.8905985%2C39.6746493%2060.8905985%2C46.7773707%20C60.8905985%2C48.8154213%2060.3990387%2C50.7366411%2059.5465996%2C52.4511599%20L66.8556616%2C58.9906963%20C68.2750531%2C60.265851%2068.3896499%2C62.4496907%2067.1119965%2C63.8626459%20M21.2803274%2C29.392529%20C21.2803274%2C29.9117776%2021.3124949%2C30.429029%2021.3738143%2C30.9293051%20C21.4089975%2C31.2138932%2021.3205368%2C31.4984814%2021.1295422%2C31.7131707%20C20.9777518%2C31.8839236%2020.7736891%2C31.9967603%2020.550527%2C32.0347054%20C18.0786547%2C32.6687878%2014.0104695%2C34.5880104%2014.0104695%2C40.3456782%20C14.0104695%2C44.6933865%2016.4240382%2C47.0929141%2018.4495863%2C48.3411077%20C19.1411878%2C48.7744806%2019.9594489%2C49.0051468%2020.8229456%2C49.0141338%20L32.9450717%2C49.0251179%20L32.9430613%2C51.0222278%20L20.811888%2C51.0112437%20C19.5664021%2C50.9982625%2018.384246%2C50.6607509%2017.3840374%2C50.0346569%20C15.3765836%2C48.7974474%2012%2C45.8896553%2012%2C40.3456782%20C12%2C33.66235%2016.5999543%2C31.191925%2019.3000149%2C30.319188%20C19.2799102%2C30.0116331%2019.2698579%2C29.702081%2019.2698579%2C29.392529%20C19.2698579%2C23.9324305%2022.9982737%2C18.2696254%2027.9420183%2C16.2215892%20C33.7241287%2C13.8150717%2039.8500294%2C15.0083449%2044.3263399%2C19.4109737%20C45.7135638%2C20.7749998%2046.8545053%2C22.4316024%2047.7300648%2C24.3478294%20C48.9061895%2C23.3802296%2050.355738%2C22.8460027%2051.8836949%2C22.8460027%20C54.8863312%2C22.8460027%2058.2659305%2C25.1097268%2058.8680661%2C30.0605622%20C61.6797078%2C30.7046302%2067.6206453%2C32.9553731%2067.6206453%2C40.422567%20C67.6206453%2C43.4042521%2066.6797455%2C45.8666886%2064.8230769%2C47.7419748%20L63.3896121%2C46.3410022%20C64.8632863%2C44.8531553%2065.6101757%2C42.8620367%2065.6101757%2C40.422567%20C65.6101757%2C33.891019%2060.1055101%2C32.2663701%2057.737177%2C31.8719409%20C57.4677741%2C31.827006%2057.2295334%2C31.6752256%2057.0757325%2C31.4515493%20C56.9259525%2C31.2358614%2056.8686541%2C30.9712444%2056.9138897%2C30.7146157%20C56.5851779%2C26.6604826%2054.1605516%2C24.8431126%2051.8836949%2C24.8431126%20C50.4472144%2C24.8431126%2049.1001998%2C25.5381069%2048.1874466%2C26.7503526%20C47.9652897%2C27.0439277%2047.6044105%2C27.193711%2047.2344841%2C27.139789%20C46.8695838%2C27.085867%2046.5629872%2C26.8362283%2046.4373329%2C26.4917268%20C45.6140456%2C24.2260057%2044.4278686%2C22.3207628%2042.9119745%2C20.8309188%20C39.0327735%2C17.0154404%2033.7281496%2C15.9809374%2028.7170543%2C18.0649216%20C24.5463352%2C19.7924217%2021.2803274%2C24.7672224%2021.2803274%2C29.392529%22%20id%3D%22Amazon-CloudWatch_Icon_64_Squid%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E","title":"Type: 'AWS::CloudWatch::Alarm'\nProperties:\n  AlarmDescription: -\n    SSH connections closed due to invalid SSH key or username is greater than 5\n    in 5 minutes\n  MetricName: sshClosedConnection\n  Namespace: SSH\n  Statistic: Sum\n  Period: 300\n  EvaluationPeriods: 1\n  Threshold: 5\n  ComparisonOperator: GreaterThanThreshold\n  TreatMissingData: notBreaching\n","resource":{"Type":"AWS::CloudWatch::Alarm","Properties":{"AlarmDescription":"SSH connections closed due to invalid SSH key or username is greater than 5 in 5 minutes","MetricName":"sshClosedConnection","Namespace":"SSH","Statistic":"Sum","Period":300,"EvaluationPeriods":1,"Threshold":5,"ComparisonOperator":"GreaterThanThreshold","TreatMissingData":"notBreaching"}}}]);
  var edges = new vis.DataSet([{"from":"root.LogRole","to":"root.BastionSecureLogGroup","label":"PolicyDocument","color":{"color":"#ac5396"}},{"from":"root.BastionInstanceProfile","to":"root.LogRole","label":"Roles","color":{"color":"#421f93"}},{"from":"root.BastionHost","to":"root.BastionNetworkInterface","label":"NetworkInterfaceId","color":{"color":"#ac5399"}},{"from":"root.BastionHost","to":"root.BastionInstanceProfile","label":"IamInstanceProfile","color":{"color":"#d2432d"}},{"from":"root.BastionHost","to":"root.BastionSecureLogGroup","label":"content","color":{"color":"#1f2393"}},{"from":"root.BastionEipAssociation","to":"root.BastionNetworkInterface","label":"NetworkInterfaceId","color":{"color":"#ac5399"}},{"from":"root.BastionEipAssociation","to":"root.BastionEip","label":"AllocationId","color":{"color":"#bf408e"}},{"from":"root.BastionSecureLogGroupStream","to":"root.BastionSecureLogGroup","label":"LogGroupName","color":{"color":"#ac6353"}},{"from":"root.SshInvalidUserMetricFilter","to":"root.BastionSecureLogGroup","label":"LogGroupName","color":{"color":"#ac6353"}},{"from":"root.SshClosedConnectionMetricFilter","to":"root.BastionSecureLogGroup","label":"LogGroupName","color":{"color":"#ac6353"}}]);
  var nested = [];
  var types = ["AWS::CloudWatch::Alarm","AWS::EC2::EIP","AWS::EC2::EIPAssociation","AWS::EC2::Instance","AWS::EC2::NetworkInterface","AWS::IAM::InstanceProfile","AWS::IAM::Role","AWS::Logs::LogGroup","AWS::Logs::LogStream","AWS::Logs::MetricFilter"];
  var showSidebar = true;
  